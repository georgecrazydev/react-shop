(this["webpackJsonpreact-shop"]=this["webpackJsonpreact-shop"]||[]).push([[0],{19:function(e,t,c){e.exports={card:"Card_card__3zUOh",cardImg:"Card_cardImg__1pfWn",cardInfo:"Card_cardInfo__14q0G"}},40:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var r=c(0),a=c.n(r),n=c(32),s=c.n(n),i=c(14),o=(c(40),c(11)),d=c(12),j=c(8),b=c.n(j),l=c(13),h=c(4),u=c(2),O=c(5),x=c.n(O),m=Object(r.createContext)({}),p=c(1);var f=function(e){var t=e.openCart,c=Object(r.useContext)(m).cartItems.reduce((function(e,t){return e+t.price}),0);return Object(p.jsxs)("header",{children:[Object(p.jsx)(i.b,{to:"/react-shop/",children:Object(p.jsxs)("div",{className:"headerLeft",children:[Object(p.jsx)("img",{src:"img/logo.svg",alt:"logo",width:40,height:40}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h3",{children:"React shop"}),Object(p.jsx)("p",{children:"Best clothing shop"})]})]})}),Object(p.jsxs)("ul",{className:"headerRight",children:[Object(p.jsxs)("li",{onClick:t,children:[Object(p.jsx)("img",{src:"img/cart.svg",alt:"cart",width:20,height:20}),Object(p.jsxs)("span",{children:[c," \u20be."]})]}),Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/react-shop/favorites",children:Object(p.jsx)("img",{src:"img/liked.svg",alt:"liked",width:20,height:20})})}),Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/react-shop/orders",children:Object(p.jsx)("img",{src:"img/user.svg",alt:"user",width:20,height:20})})})]})]})};var v=function(e){var t=e.title,c=e.image,a=e.description,n=Object(r.useContext)(m).setCart;return Object(p.jsxs)("div",{className:"greenButton",children:[Object(p.jsxs)("div",{className:"drawerEmpty",children:[Object(p.jsx)("img",{src:c,alt:"empty",width:120,height:120}),Object(p.jsx)("h4",{children:t}),Object(p.jsx)("p",{children:a})]}),Object(p.jsxs)("button",{className:"buttonBack",onClick:function(){n()},children:[Object(p.jsx)("span",{children:"Back"}),Object(p.jsx)("img",{src:"img/arrowLeft.svg",alt:"arrow"})]})]})};var g=function(e){var t=e.closeCart,c=e.cartItems,a=e.onRemove,n=Object(r.useContext)(m).setCartItems,s=Object(r.useState)(!1),i=Object(h.a)(s,2),o=i[0],d=i[1],j=Object(r.useState)(null),u=Object(h.a)(j,2),O=u[0],f=u[1],g=Object(r.useState)(!1),w=Object(h.a)(g,2),k=w[0],N=w[1],C=c.reduce((function(e,t){return e+t.price}),0),y=function(){var e=Object(l.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,x.a.post("https://612ce387ab461c00178b5f65.mockapi.io/orders",{items:c});case 4:t=e.sent,r=t.data,f(r.id),d(!0),n([]),c.forEach((function(e){x.a.delete("https://612ce387ab461c00178b5f65.mockapi.io/cart/".concat(e.id))})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert("Error 404");case 15:N(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"overlay",children:Object(p.jsxs)("div",{className:"drawer",children:[Object(p.jsxs)("div",{className:"drawerTop",children:[Object(p.jsx)("h3",{children:"Basket"}),Object(p.jsx)("img",{onClick:t,className:"closeButton",src:"img/close.svg",alt:"close",width:32,height:32})]}),c.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"drawerItems",children:c.map((function(e){return Object(p.jsxs)("div",{className:"drawerItem",children:[Object(p.jsx)("img",{src:e.imageUrl,alt:"img",width:70,height:70}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:e.title}),Object(p.jsxs)("b",{children:[e.price," \u20be."]})]}),Object(p.jsx)("img",{onClick:function(){a(e.id)},className:"closeButton",src:"img/close.svg",alt:"close",width:32,height:32})]},e.id)}))}),Object(p.jsxs)("div",{className:"drawerBottom",children:[Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{children:[Object(p.jsx)("p",{children:"Total:"}),Object(p.jsx)("div",{}),Object(p.jsxs)("b",{children:[C," \u20be."]})]}),Object(p.jsxs)("li",{children:[Object(p.jsx)("p",{children:"Tax 10%:"}),Object(p.jsx)("div",{}),Object(p.jsxs)("b",{children:[.05*C," \u20be."]})]})]}),Object(p.jsxs)("button",{disabled:k,onClick:y,className:"buttonSubmit",children:[Object(p.jsx)("span",{children:"Checkout"}),Object(p.jsx)("img",{src:"img/arrow.svg",alt:"arrow",width:14,height:12})]})]})]}):Object(p.jsx)(v,{title:o?" Order is processed!":"Cart is empty",description:o?"Your order # ".concat(O," will be delivered by courier soon"):"Add at least one pair of clothing",image:o?"img/order.png":"img/empty.png"})]})})},w=c(35),k=c(19),N=c.n(k);var C=function(e){var t=e.id,c=e.title,a=e.price,n=e.imageUrl,s=e.onAdd,i=e.onFavorite,o=e.isFavorite,d=void 0!==o&&o,j=(e.added,e.loading),b=void 0!==j&&j,l=Object(r.useContext)(m).isItemAdded,u=Object(r.useState)(d),O=Object(h.a)(u,2),x=O[0],f=O[1],v={id:t,parentId:t,title:c,price:a,imageUrl:n};return Object(p.jsx)("div",{className:N.a.card,children:b?Object(p.jsxs)(w.a,{speed:2,width:168,height:262,viewBox:"0 0 168 262",backgroundColor:"#f5f5f5",foregroundColor:"#ecebeb",children:[Object(p.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"150",height:"150"}),Object(p.jsx)("rect",{x:"0",y:"166",rx:"3",ry:"3",width:"150",height:"20"}),Object(p.jsx)("rect",{x:"117",y:"208",rx:"8",ry:"8",width:"32",height:"32"}),Object(p.jsx)("rect",{x:"0",y:"203",rx:"8",ry:"8",width:"100",height:"15"}),Object(p.jsx)("rect",{x:"0",y:"228",rx:"8",ry:"8",width:"80",height:"15"})]}):Object(p.jsxs)("div",{children:[i&&Object(p.jsx)("img",{onClick:function(){i(v),f(!x)},src:x?"img/favorite.svg":"img/unliked.svg",alt:"unliked",width:32,height:32}),Object(p.jsx)("img",{className:N.a.cardImg,src:n,alt:"img",width:150,height:150}),Object(p.jsx)("h5",{children:c}),Object(p.jsxs)("div",{className:N.a.cardInfo,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Price:"}),Object(p.jsxs)("b",{children:[a," \u20be."]})]}),s&&Object(p.jsx)("img",{onClick:function(){s(v)},src:l(t)?"img/added.svg":"img/add.svg",alt:"plus",width:32,height:32})]})]})})};var y=function(e){var t=e.goods,c=e.searchValue,r=e.onSearchInput,a=e.setSearchValue,n=e.onAddFavorite,s=e.onAddToCart,i=e.isLoading;return Object(p.jsxs)("div",{className:"content",children:[Object(p.jsxs)("div",{className:"contentTop",children:[Object(p.jsx)("h1",{children:c?"Search by order : ".concat(c):"All the clothing"}),Object(p.jsxs)("div",{className:"search",children:[Object(p.jsx)("input",{onChange:r,value:c,type:"text",placeholder:"Search..."}),Object(p.jsx)("img",{src:"img/search.svg",alt:"search",width:15,height:15}),c&&Object(p.jsx)("img",{onClick:function(){a("")},className:"buttonClose",src:"img/close.svg",alt:"search",width:15,height:15})]})]}),Object(p.jsx)("div",{className:"cardItems",children:function(){var e=t.filter((function(e){return e.title.toLowerCase().includes(c.toLowerCase())}));return(i?Object(d.a)(Array(10)):e).map((function(e,t){return Object(p.jsx)(C,Object(o.a)(Object(o.a)({onFavorite:function(e){return n(e)},onAdd:function(e){return s(e)}},e),{},{loading:i}),t)}))}()})]})};var I=function(){var e=Object(r.useContext)(m),t=e.favorites,c=e.onAddFavorite,a=e.onAddToCart;return Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("div",{className:"contentTop",children:Object(p.jsx)("h1",{children:"My bookmarks"})}),Object(p.jsx)("div",{className:"cardItems",children:t.map((function(e,t){return Object(p.jsx)(C,Object(o.a)({onFavorite:function(e){return c(e)},onAdd:function(e){return a(e)},isFavorite:!0},e),t)}))})]})};function S(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),c=t[0],a=t[1],n=Object(r.useState)(!0),s=Object(h.a)(n,2),i=s[0],j=s[1];return Object(r.useEffect)((function(){try{Object(l.a)(b.a.mark((function e(){var t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("https://612ce387ab461c00178b5f65.mockapi.io/orders");case 2:t=e.sent,c=t.data,a(c.reduce((function(e,t){return[].concat(Object(d.a)(e),Object(d.a)(t.items))}),[])),j(!1);case 6:case"end":return e.stop()}}),e)})))()}catch(e){alert("Error 404")}}),[]),Object(p.jsxs)("div",{className:"content",children:[Object(p.jsx)("div",{className:"contentTop",children:Object(p.jsx)("h1",{children:"My orders"})}),Object(p.jsx)("div",{className:"cardItems",children:(i?Object(d.a)(Array(10)):c).map((function(e,t){return Object(p.jsx)(C,Object(o.a)(Object(o.a)({},e),{},{loading:i}),t)}))})]})}var A=function(){var e=Object(r.useState)([]),t=Object(h.a)(e,2),c=t[0],a=t[1],n=Object(r.useState)(!1),s=Object(h.a)(n,2),i=s[0],j=s[1],O=Object(r.useState)([]),v=Object(h.a)(O,2),w=v[0],k=v[1],N=Object(r.useState)([]),C=Object(h.a)(N,2),A=C[0],F=C[1],T=Object(r.useState)(""),B=Object(h.a)(T,2),_=B[0],E=B[1],L=Object(r.useState)(!0),R=Object(h.a)(L,2),U=R[0],V=R[1];Object(r.useEffect)((function(){try{(function(){var e=Object(l.a)(b.a.mark((function e(){var t,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("https://612ce387ab461c00178b5f65.mockapi.io/cart");case 2:return t=e.sent,e.next=5,x.a.get("https://612ce387ab461c00178b5f65.mockapi.io/favorites");case 5:return c=e.sent,e.next=8,x.a.get("https://612ce387ab461c00178b5f65.mockapi.io/goods");case 8:r=e.sent,V(!1),k(t.data),F(c.data),a(r.data);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}catch(e){alert("Failed FetchData")}}),[]);var M=function(){var e=Object(l.a)(b.a.mark((function e(t){var c,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(c=w.find((function(e){return Number(e.parentId)===Number(t.id)})))){e.next=8;break}return k((function(e){return e.filter((function(e){return Number(e.parentId)!==Number(t.id)}))})),e.next=6,x.a.delete("https://612ce387ab461c00178b5f65.mockapi.io/cart/".concat(c.id));case 6:e.next=14;break;case 8:return k((function(e){return[].concat(Object(d.a)(e),[t])})),e.next=11,x.a.post("https://612ce387ab461c00178b5f65.mockapi.io/cart",t);case 11:r=e.sent,a=r.data,k((function(e){return e.map((function(e){return e.parentId===a.parentId?Object(o.a)(Object(o.a)({},e),{},{id:a.id}):e}))}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),alert("Failed to add to favorites");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(b.a.mark((function e(t){var c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!A.find((function(e){return Number(e.id)===Number(t.id)}))){e.next=6;break}x.a.delete("https://612ce387ab461c00178b5f65.mockapi.io/favorites/".concat(t.id)),F((function(e){return e.filter((function(e){return Number(e.id)!==Number(t.id)}))})),e.next=11;break;case 6:return e.next=8,x.a.post("https://612ce387ab461c00178b5f65.mockapi.io/favorites",t);case 8:c=e.sent,r=c.data,F((function(e){return[].concat(Object(d.a)(e),[r])}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert("Failed to add to favorites");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(m.Provider,{value:{goods:c,cartItems:w,favorites:A,isItemAdded:function(e){return w.some((function(t){return Number(t.parentId)===Number(e)}))},onAddFavorite:J,onAddToCart:M,setCart:j,setCartItems:k},children:Object(p.jsxs)("div",{className:"wrapper",children:[i&&Object(p.jsx)(g,{closeCart:function(){j(!1)},onRemove:function(e){try{x.a.delete("https://612ce387ab461c00178b5f65.mockapi.io/cart/".concat(e)),k((function(t){return t.filter((function(t){return Number(t.id)!==Number(e)}))}))}catch(t){alert("Failed")}},cartItems:w}),Object(p.jsx)(f,{openCart:function(){j(!0)}}),Object(p.jsx)(u.a,{path:"/react-shop/",exact:!0,children:Object(p.jsx)(y,{goods:c,cartItems:w,searchValue:_,onSearchInput:function(e){E(e.target.value)},setSearchValue:E,onAddFavorite:J,onAddToCart:M,isLoading:U})}),Object(p.jsx)(u.a,{path:"/react-shop/favorites",exact:!0,children:Object(p.jsx)(I,{onAddFavorite:J,onAddToCart:M})}),Object(p.jsx)(u.a,{path:"/react-shop/orders",exact:!0,children:Object(p.jsx)(S,{})})]})})};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(A,{})})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.81a414c1.chunk.js.map